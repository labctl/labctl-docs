import{_ as e,o as t,c as a,a as o}from"./app.bfd66847.js";const f=JSON.parse('{"title":"Config Engine","description":"","frontmatter":{},"headers":[{"level":2,"title":"Transmit commands","slug":"transmit-commands","link":"#transmit-commands","children":[{"level":3,"title":"Template pre-processing","slug":"template-pre-processing","link":"#template-pre-processing","children":[]}]},{"level":2,"title":"Transport","slug":"transport","link":"#transport","children":[]},{"level":2,"title":"SSH settings","slug":"ssh-settings","link":"#ssh-settings","children":[]},{"level":2,"title":"Target non-containerlab labs","slug":"target-non-containerlab-labs","link":"#target-non-containerlab-labs","children":[]}],"relativePath":"guide/config-engine-tx.md","lastUpdated":1661870766000}'),n={name:"guide/config-engine-tx.md"},s=o('<h1 id="config-engine" tabindex="-1">Config Engine <a class="header-anchor" href="#config-engine" aria-hidden="true">#</a></h1><h2 id="transmit-commands" tabindex="-1">Transmit commands <a class="header-anchor" href="#transmit-commands" aria-hidden="true">#</a></h2><p>Once you have rendered templates you can transmit them to the nodes via SSH. They can either be sent as plain commands, or you can use transactions if supported by your node.</p><p>These actions map to three commands:</p><ul><li><code>config send</code> - Send generated text to the node. This will typically be used for show commands, no configuration session is started on the node.</li><li><code>config compare</code> - Start configuration priviledge level. Usually this is also the start of a transaction. Compare the results and discard any changes.</li><li><code>config commit</code> - Start configuration priviledge level. Execute a commit transaction.</li></ul><h3 id="template-pre-processing" tabindex="-1">Template pre-processing <a class="header-anchor" href="#template-pre-processing" aria-hidden="true">#</a></h3><p>Generated templates are pre-processed before sending.</p><ul><li>Empty whitespace will be removed. This includes blank lines &amp; leading and trailing whitespace</li><li>If the node config supports comments, these will be removed</li></ul><h2 id="transport" tabindex="-1">Transport <a class="header-anchor" href="#transport" aria-hidden="true">#</a></h2><p>Containerlab Kinds (from the topology file) will be mapped to Scrapligo&#39;s platforms, and these platforms contain the knowledge of how to authenticate to the node and how to do any required priviledge level changes for configuration etc. The labctl repo contains details about transactions.</p><p>Scrapligo platforms are available <a href="https://github.com/scrapli/scrapligo/tree/main/assets/platforms" target="_blank" rel="noreferrer">here</a></p><p>The mapping of Kinds to platforms and other options (comment character, compare and commit commands per kind) can be found <a href="https://github.com/labctl/labctl/blob/main/utils/tx/kindmap.go" target="_blank" rel="noreferrer">here</a>. Please feel free to submit PR&#39;s for any missing platforms!</p><h2 id="ssh-settings" tabindex="-1">SSH settings <a class="header-anchor" href="#ssh-settings" aria-hidden="true">#</a></h2><p>By default SSH uses the default username and password from containerlab and will target containerlab&#39;s long name as the SSH host and port 22. These long names names are used for DNS resolution and added to /etc/hosts when you deploy your lab. The format of the long name is shown below:</p><table><thead><tr><th>clab-<code>&lt;topo name&gt;</code>-<code>&lt;node name&gt;</code></th></tr></thead></table><p>The prefix <strong>clab</strong> can be changed with <code>prefix</code> key in the topology file.</p><p>You can override the SSH settings by defining additional <code>vars</code> on the nodes.</p><table><thead><tr><th>Variable name</th><th>Description</th></tr></thead><tbody><tr><td><code>ssh_host</code></td><td>The target SSH host name or IP. Defaults to the containerlab long name.</td></tr><tr><td><code>ssh_port</code></td><td>The SSH port. Default 22</td></tr><tr><td><code>ssh_platform</code></td><td>The scrapligo platform. Default s to the Kind map <a href="#transport">more</a></td></tr><tr><td><code>ssh_username</code></td><td>The node&#39;s username. Defaults to the containerlab default username.</td></tr><tr><td><code>ssh_password</code></td><td>The node&#39;s password. Defaults to the containerlab default password.</td></tr></tbody></table><h2 id="target-non-containerlab-labs" tabindex="-1">Target non-containerlab labs <a class="header-anchor" href="#target-non-containerlab-labs" aria-hidden="true">#</a></h2><p>Not all your labs might be deployed by containerlab, so when you have any other setup, you can use the ssh variables to target the correct nodes. The only thing you&#39;ll need is a valid topo file.</p><p>With <code>ssh_host</code> and <code>ssh_port</code> you can target physical nodes or even nodes deployed directly with <code>virsh</code> over one or mulitple hosts.</p>',21),r=[s];function i(d,l,c,h,p,m){return t(),a("div",null,r)}const u=e(n,[["render",i]]);export{f as __pageData,u as default};
